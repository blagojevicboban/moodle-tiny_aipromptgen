/**
 * Age range picker modal for the AI Prompt Generator.
 *
 * @package
 * @copyright  2025 AI4Teachers
 * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
 */
define("tiny_aipromptgen/age",[],(function(){const $=function(sel,root){return(root=root||document).querySelector(sel)},SimpleModal=function(id){this.node=document.getElementById(id),this.backdrop=document.getElementById("ai4t-modal-backdrop")};SimpleModal.prototype.open=function(prefill){if(this.node){if("function"==typeof prefill)try{prefill()}catch(e){}this.node.style.display="block",this.backdrop&&(this.backdrop.style.display="block"),this.node.focus()}},SimpleModal.prototype.close=function(){this.node&&(this.node.style.display="none",this.backdrop&&(this.backdrop.style.display="none"))};return{initAgeModal:function(){const modal=new SimpleModal("ai4t-age-modal"),openBtn=$("#ai4t-age-browse"),closeBtn=$("#ai4t-age-modal-close"),cancelBtn=$("#ai4t-age-modal-cancel"),insertBtn=$("#ai4t-age-modal-insert"),input=$("#id_agerange"),exact=$("#ai4t-age-exact"),from=$("#ai4t-age-from"),to=$("#ai4t-age-to"),modeExact=$("#ai4t-age-mode-exact"),modeRange=$("#ai4t-age-mode-range"),syncEnabled=function(){modeExact&&modeExact.checked?(exact&&exact.removeAttribute("disabled"),from&&from.setAttribute("disabled","disabled"),to&&to.setAttribute("disabled","disabled")):(exact&&exact.setAttribute("disabled","disabled"),from&&from.removeAttribute("disabled"),to&&to.removeAttribute("disabled"))},prefill=function(){if(!input)return;const v=(input.value||"").trim();if(!v)return modeExact&&(modeExact.checked=!0),exact&&(exact.value=""),from&&(from.value=""),to&&(to.value=""),void syncEnabled();if(/^\d+$/.test(v))return exact&&(exact.value=v),from&&(from.value=""),to&&(to.value=""),modeExact&&(modeExact.checked=!0),void syncEnabled();const m=v.match(/^\s*(\d+)\s*[-\u2013]\s*(\d+)\s*$/u);return m?(exact&&(exact.value=""),from&&(from.value=m[1]),to&&(to.value=m[2]),modeRange&&(modeRange.checked=!0),void syncEnabled()):void 0},onInsert=function(){if(!input)return void modal.close();const ev=(exact&&exact.value||"").trim(),fv=(from&&from.value||"").trim(),tv=(to&&to.value||"").trim(),useExact=modeExact&&modeExact.checked;if(useExact&&ev)return input.value=ev,void modal.close();if(!useExact&&fv&&tv){let a=parseInt(fv,10),b=parseInt(tv,10);if(!isNaN(a)&&!isNaN(b)){if(a>b){const tmp=a;a=b,b=tmp}return input.value=a+"-"+b,void modal.close()}}modal.close()};openBtn&&openBtn.addEventListener("click",(function(e){e.preventDefault(),e.stopPropagation(),modal.open(prefill)})),closeBtn&&closeBtn.addEventListener("click",(function(){modal.close()})),cancelBtn&&cancelBtn.addEventListener("click",(function(){modal.close()})),insertBtn&&insertBtn.addEventListener("click",onInsert),modeExact&&modeExact.addEventListener("change",syncEnabled),modeRange&&modeRange.addEventListener("change",syncEnabled),document.addEventListener("keydown",(function(ev){"Escape"===ev.key&&modal.close()}))}}}));

//# sourceMappingURL=age.min.js.map