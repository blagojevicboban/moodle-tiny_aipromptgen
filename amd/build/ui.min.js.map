{"version":3,"file":"ui.min.js","sources":["../src/ui.js"],"sourcesContent":["define([], function() {\n    return {\n        init: function() {\n            require([\n                'tiny_aipromptgen/age',\n                'tiny_aipromptgen/pickers',\n                'tiny_aipromptgen/actions',\n                'tiny_aipromptgen/stream',\n                'tiny_aipromptgen/markdown'\n            ], function(Age, Pickers, Actions, Stream, Markdown) {\n\n                var updatePrompt = function() {\n                    var getValue = function(id) {\n                        var el = document.getElementById(id);\n                        return el ? el.value : '';\n                    };\n\n                    var subject = getValue('id_subject');\n                    if (!subject) {\n                        var subjectEl = document.getElementById('id_subject');\n                        if (subjectEl && subjectEl.placeholder) {\n                            subject = subjectEl.placeholder;\n                        }\n                    }\n\n                    var age = getValue('id_agerange');\n                    var topic = getValue('id_topic');\n                    var lesson = getValue('id_lesson');\n                    var count = getValue('id_lessoncount') || '1';\n                    var duration = getValue('id_lessonduration') || '45';\n                    var classtype = getValue('id_classtype');\n                    var purpose = getValue('id_purpose');\n                    var audience = getValue('id_audience');\n                    var outcomes = getValue('id_outcomes');\n                    var language = getValue('id_language') || 'English';\n\n                    var p = \"You are an expert teacher. Create a detailed lesson plan.\\n\";\n                    p += \"Subject: \" + subject + \"\\n\";\n                    if (age) {\n                        p += \"Student Age: \" + age + \" years old\\n\";\n                    }\n                    if (topic) {\n                        p += \"Topic: \" + topic + \"\\n\";\n                    }\n                    if (lesson) {\n                        p += \"Lesson Title: \" + lesson + \"\\n\";\n                    }\n                    p += \"Number of lessons: \" + count + \"\\n\";\n                    p += \"Duration per lesson: \" + duration + \" minutes\\n\";\n                    if (classtype) {\n                        p += \"Class Type: \" + classtype + \"\\n\";\n                    }\n                    if (purpose) {\n                        p += \"Purpose: \" + purpose + \"\\n\";\n                    }\n                    if (audience) {\n                        p += \"Target Audience: \" + audience + \"\\n\";\n                    }\n                    if (outcomes) {\n                        p += \"Learning Outcomes/Competencies:\\n\" + outcomes + \"\\n\";\n                    }\n                    p += \"Language: \" + language + \"\\n\";\n                    p += \"\\nPlease provide a structured lesson plan with objectives, activities, and timeline.\";\n\n                    var gen = document.getElementById('ai4t-generated');\n                    if (gen) {\n                        gen.value = p;\n                        // Trigger input event to update valid state of buttons\n                        gen.dispatchEvent(new Event('input', {bubbles: true}));\n                    }\n                };\n\n                var initAutoUpdate = function() {\n                    var ids = [\n                        'id_subject', 'id_agerange', 'id_topic', 'id_lesson',\n                        'id_lessoncount', 'id_lessonduration', 'id_classtype',\n                        'id_purpose', 'id_audience', 'id_outcomes', 'id_language'\n                    ];\n\n                    ids.forEach(function(id) {\n                        var el = document.getElementById(id);\n                        if (el) {\n                            el.addEventListener('input', updatePrompt);\n                            el.addEventListener('change', updatePrompt);\n                        }\n                    });\n\n                    // Initial update\n                    // We stick it in a timeout to ensure everything is rendered\n                    setTimeout(updatePrompt, 500);\n                };\n\n                // Editor detection logic removed.\n\n                var initProviderSend = function() {\n                    var sendBtn = document.getElementById('ai4t-sendtoai');\n                    var select = document.getElementById('ai4t-provider');\n                    var gen = document.getElementById('ai4t-generated');\n                    var hidden = document.getElementById('ai4t-sendto');\n\n                    if (!hidden && sendBtn) {\n                        var form = document.getElementById('mform1') ||\n                                   document.getElementById('promptform') ||\n                                   sendBtn.closest('form');\n                        if (form) {\n                            hidden = document.createElement('input');\n                            hidden.type = 'hidden';\n                            hidden.name = 'sendto';\n                            hidden.id = 'ai4t-sendto';\n                            form.appendChild(hidden);\n                        }\n                    }\n\n                    if (!sendBtn || !select || !gen) {\n                        return;\n                    }\n\n                    var refreshState = function() {\n                        var opt = select.options[select.selectedIndex];\n                        var unconfigured = opt && /âœ•\\s*$/.test(opt.textContent || '');\n                        sendBtn.disabled = (!gen.value.trim() || unconfigured);\n                    };\n\n                    select.addEventListener('change', refreshState);\n                    gen.addEventListener('input', refreshState);\n\n                    sendBtn.addEventListener('click', function(e) {\n                        if (sendBtn.disabled) {\n                            return;\n                        }\n                        var provider = select.value;\n                        var form = document.getElementById('ai4t-send-form');\n\n                        if (provider === 'ollama') {\n                            e.preventDefault();\n                            var resp = document.getElementById('ai4t-airesponse-body') ||\n                                       document.getElementById('ai4t-airesponse');\n\n                            Stream.startStream(function() {\n                                return form;\n                            }, gen, hidden, resp, function() {\n                                // No-op scroll.\n                            });\n                            return;\n                        }\n\n                        // For non-streaming providers, show loading state.\n                        sendBtn.disabled = true;\n                        sendBtn.textContent = 'Generating...';\n                        hidden.value = provider;\n                        if (form) {\n                            form.submit();\n                        }\n                    });\n                    refreshState();\n                };\n\n                var initResponseModal = function() {\n                    var modal = document.getElementById('ai4t-airesponse-modal');\n                    if (!modal) {\n                        return;\n                    }\n\n                    var bodyRaw = document.getElementById('ai4t-airesponse-body');\n                    var bodyText = document.getElementById('ai4t-airesponse-text');\n                    var bodyHtml = document.getElementById('ai4t-airesponse-html');\n                    var bodyCode = document.getElementById('ai4t-airesponse-code');\n                    var backdrop = document.getElementById('ai4t-modal-backdrop');\n\n                    var setView = function(view) {\n                        var btns = ['raw', 'text', 'html', 'rich'].map(function(v) {\n                            return document.getElementById('ai4t-btn-' + v);\n                        });\n                        var bodies = [bodyRaw, bodyText, bodyHtml, bodyCode];\n\n                        btns.forEach(function(btn) {\n                            if (btn) {\n                                btn.classList.remove('btn-secondary');\n                                btn.classList.add('btn-outline-secondary');\n                            }\n                        });\n                        bodies.forEach(function(b) {\n                            if (b) {\n                                b.style.display = 'none';\n                            }\n                        });\n\n                        applyView(view, btns, bodies, bodyRaw, bodyText, bodyCode, bodyHtml, Markdown);\n                    };\n\n                        // Standalone mode: we are in a popup, and the user wants to \"open\" the prompt builder.\n                        // However, we ARE in the prompt builder. This event listener might be redundant\n                        // or legacy from the block view. We will simply do nothing here for now,\n                        // as we are already in the correct view.\n\n                    document.addEventListener('click', function(e) {\n                        handleModalClick(e, modal, backdrop, {\n                            bodyRaw: bodyRaw, bodyText: bodyText, bodyHtml: bodyHtml, bodyCode: bodyCode,\n                            setView: setView, showStatus: showStatus, copyRichText: copyRichText\n                        });\n                    });\n\n                    if (bodyRaw && bodyRaw.textContent.trim().length > 0) {\n                        modal.style.display = 'block';\n                        if (backdrop) {\n                            backdrop.style.display = 'block';\n                        }\n                        setView('rich');\n\n                    }\n                };\n\n                var applyView = function(view, btns, bodies, bodyRaw, bodyText, bodyCode, bodyHtml, Markdown) {\n                    var map = {raw: 0, text: 1, html: 2, rich: 3};\n                    var idx = map[view];\n                    if (btns[idx]) {\n                        btns[idx].classList.remove('btn-outline-secondary');\n                        btns[idx].classList.add('btn-secondary');\n                    }\n\n                    if (view === 'raw' && bodyRaw) {\n                        bodyRaw.style.display = 'block';\n                    } else if (view === 'text' && bodyText) {\n                        bodyText.style.display = 'block';\n                        bodyText.textContent = Markdown.renderText(bodyRaw.textContent);\n                    } else if (view === 'html' && bodyCode) {\n                        bodyCode.style.display = 'block';\n                        bodyCode.textContent = Markdown.renderMarkdown(bodyRaw.textContent);\n                    } else if (view === 'rich' && bodyHtml) {\n                        bodyHtml.style.display = 'block';\n                        try {\n                            bodyHtml.innerHTML = Markdown.renderMarkdown(bodyRaw.textContent);\n                        } catch (e) {\n                            bodyHtml.innerHTML = '<p>Error rendering Markdown.</p>';\n                        }\n                    }\n                };\n\n                var handleModalClick = function(e, modal, backdrop, refs) {\n                    var btn = e.target.closest('button');\n                    var t = e.target;\n                    if (btn) {\n                        if (btn.id === 'ai4t-btn-raw') {\n                            refs.setView('raw');\n                        } else if (btn.id === 'ai4t-btn-text') {\n                            refs.setView('text');\n                        } else if (btn.id === 'ai4t-btn-html') {\n                            refs.setView('html');\n                        } else if (btn.id === 'ai4t-btn-rich') {\n                            refs.setView('rich');\n                        } else if (btn.id === 'ai4t-airesponse-modal-close-btn') {\n                            modal.style.display = 'none';\n                            if (backdrop) {\n                                backdrop.style.display = 'none';\n                            }\n                        } else if (btn.id === 'ai4t-airesponse-modal-copy-btn') {\n                            handleCopy(refs);\n                        } else if (btn.id === 'ai4t-airesponse-modal-insert-btn') {\n                            handleInsert(refs);\n                        }\n                    }\n                    if (t && t.id === 'ai4t-airesponse-modal-close') {\n                        modal.style.display = 'none';\n                        if (backdrop) {\n                            backdrop.style.display = 'none';\n                        }\n                    }\n                };\n\n                var handleCopy = function(refs) {\n                    if (refs.bodyHtml && refs.bodyHtml.style.display !== 'none') {\n                        if (refs.copyRichText(refs.bodyHtml)) {\n                            refs.showStatus('Copied as Rich Text!');\n                        } else {\n                            refs.showStatus('Copy failed');\n                        }\n                    } else {\n                        var text = '';\n                        if (refs.bodyRaw && refs.bodyRaw.style.display !== 'none') {\n                            text = refs.bodyRaw.textContent;\n                        } else if (refs.bodyText && refs.bodyText.style.display !== 'none') {\n                            text = refs.bodyText.textContent;\n                        } else if (refs.bodyCode && refs.bodyCode.style.display !== 'none') {\n                            text = refs.bodyCode.textContent;\n                        }\n\n                        if (navigator.clipboard && navigator.clipboard.writeText) {\n                            navigator.clipboard.writeText(text).then(function() {\n                                refs.showStatus('Copied to clipboard!');\n                                return;\n                            }).catch(function() {\n                                // Silent fail.\n                            });\n                        } else {\n                            // Fallback\n                            var ta = document.createElement('textarea');\n                            ta.value = text;\n                            document.body.appendChild(ta);\n                            ta.select();\n                            document.execCommand('copy');\n                            document.body.removeChild(ta);\n                            refs.showStatus('Copied!');\n                        }\n                    }\n                };\n\n                var showStatus = function(msg) {\n                    var status = document.getElementById('ai4t-modal-copy-status');\n                    if (status) {\n                        status.textContent = msg;\n                        status.style.display = 'inline';\n                        setTimeout(function() {\n                            status.style.display = 'none';\n                        }, 2000);\n                    } else {\n                        window.console.log(msg);\n                    }\n                };\n\n                var handleInsert = function(refs) {\n                    var content = '';\n                    if (refs.bodyHtml && refs.bodyHtml.style.display !== 'none') {\n                        content = refs.bodyHtml.innerHTML;\n                    } else if (refs.bodyCode && refs.bodyCode.style.display !== 'none') {\n                        content = refs.bodyCode.textContent;\n                    } else if (refs.bodyText && refs.bodyText.style.display !== 'none') {\n                        // Convert newlines to paragraphs for plain text view.\n                        content = refs.bodyText.textContent.trim().split(/\\n+/).map(function(p) {\n                            return '<p>' + p.trim() + '</p>';\n                        }).join('');\n                    } else if (refs.bodyRaw && refs.bodyRaw.style.display !== 'none') {\n                        // Convert newlines to breaks for raw view.\n                        content = refs.bodyRaw.textContent.replace(/\\n/g, '<br>');\n                    }\n\n                    if (window.opener && window.opener.tinyMCE && window.opener.tinyMCE.activeEditor) {\n                        try {\n                            window.opener.tinyMCE.activeEditor.insertContent(content);\n                            window.close();\n                        } catch (e) {\n                            window.console.error('Failed to insert content. The editor window might be closed.');\n                        }\n                    } else {\n                        window.console.error('Could not find the parent editor window.');\n                    }\n                };\n\n                var copyRichText = function(el) {\n                    try {\n                        var range = document.createRange();\n                        range.selectNode(el);\n                        var selection = window.getSelection();\n                        selection.removeAllRanges();\n                        selection.addRange(range);\n                        var successful = document.execCommand('copy');\n                        selection.removeAllRanges();\n                        return successful;\n                    } catch (e) {\n                        return false;\n                    }\n                };\n\n                // Initialize all modules\n                var inits = [\n                    function() {\n                        Age.initAgeModal();\n                    },\n                    function() {\n                        Pickers.attachPicker({\n                            openId: 'ai4t-lesson-browse', modalId: 'ai4t-modal',\n                            closeId: 'ai4t-modal-close', cancelId: 'ai4t-modal-cancel',\n                            itemSelector: '.ai4t-lesson-item', targetId: 'id_lesson'\n                        });\n                        Pickers.attachPicker({\n                            openId: 'ai4t-topic-browse', modalId: 'ai4t-topic-modal',\n                            closeId: 'ai4t-topic-modal-close', cancelId: 'ai4t-topic-modal-cancel',\n                            itemSelector: '.ai4t-topic-item', targetId: 'id_topic'\n                        });\n                        Pickers.attachOutcomesModal();\n                        Pickers.initLanguageModal();\n                        ['purpose', 'audience', 'classtype'].forEach(function(k) {\n                            Pickers.attachPicker({\n                                openId: 'ai4t-' + k + '-browse', modalId: 'ai4t-' + k + '-modal',\n                                closeId: 'ai4t-' + k + '-modal-close', cancelId: 'ai4t-' + k + '-modal-cancel',\n                                itemSelector: '.ai4t-' + k + '-item', targetId: 'id_' + k\n                            });\n                        });\n                    },\n                    function() {\n                        Actions.attachCopyDownload();\n                    },\n                    function() {\n                        initProviderSend();\n                    },\n                    function() {\n                        initAutoUpdate();\n                    },\n                    function() {\n                        initResponseModal();\n                    }\n                ];\n\n                inits.forEach(function(fn) {\n                    try {\n                        fn();\n                    } catch (e) {\n                        /* Silent fail */\n                    }\n                });\n            });\n        }\n    };\n});\n"],"names":["define","init","require","Age","Pickers","Actions","Stream","Markdown","updatePrompt","getValue","id","el","document","getElementById","value","subject","subjectEl","placeholder","age","topic","lesson","count","duration","classtype","purpose","audience","outcomes","p","gen","dispatchEvent","Event","bubbles","applyView","view","btns","bodies","bodyRaw","bodyText","bodyCode","bodyHtml","idx","raw","text","html","rich","classList","remove","add","style","display","textContent","renderText","renderMarkdown","innerHTML","e","handleModalClick","modal","backdrop","refs","btn","target","closest","t","setView","handleCopy","handleInsert","copyRichText","showStatus","navigator","clipboard","writeText","then","catch","ta","createElement","body","appendChild","select","execCommand","removeChild","msg","status","setTimeout","window","console","log","content","trim","split","map","join","replace","opener","tinyMCE","activeEditor","insertContent","close","error","range","createRange","selectNode","selection","getSelection","removeAllRanges","addRange","successful","initAgeModal","attachPicker","openId","modalId","closeId","cancelId","itemSelector","targetId","attachOutcomesModal","initLanguageModal","forEach","k","attachCopyDownload","sendBtn","hidden","form","type","name","refreshState","opt","options","selectedIndex","unconfigured","test","disabled","addEventListener","provider","submit","preventDefault","resp","startStream","initProviderSend","v","b","length","initResponseModal","fn"],"mappings":"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"}