define("tiny_aipromptgen/markdown",[],(function(){const autofixMarkdown=function(text){if(!text)return text;let res=text;return res=res.replace(/([.!?])(\s*)(\d+\.\s+)/g,"$1\n$3"),res=res.replace(/(\*\*)(?:\s*\n+\s*|\s+)/g,"$1"),res=res.replace(/(?:\s*\n+\s*|\s+)(\*\*)/g,"$1"),res=res.replace(/\*\s+\*/g,"**"),res=res.replace(/([a-z\u00C0-\u00FF0-9.!?])(\s*)([*\-+] |\d+\. |#{1,6} )/g,"$1\n$3"),res=res.replace(/^\s*\+\s+/gm,"* "),res=res.replace(/([^\n])(\*\*\*\*.*?\*\*\*\*)/g,"$1\n\n$2"),res=res.replace(/(\*\*\*\*.*?\*\*\*\*)([^\n])/g,"$1\n\n$2"),res=res.replace(/(:)(\*\*\*)/g,"$1**\n* "),res=res.replace(/([^\n])(\*\*\*)(\s)/g,"$1**\n*$3"),res=res.replace(/([.?!)])\s*(\* )/g,"$1\n$2"),res=res.replace(/([^\n])(\*\*\*\*)(?=\S)/g,"**\n\n**"),res=res.replace(/([^\n])(\*\*|__)(?=[a-zA-Z0-9\u00C0-\u00FF])/g,"$1\n$2"),res=res.replace(/([^\n])(^|\s)([*\-+] )/g,"$1\n$3"),res=res.replace(/([^\n])(#{1,6} )/g,"$1\n$2"),res=res.replace(/([^\n])(^|\s)(\*\*\*|---|___)(\s|$)/gm,"$1\n$3"),res=res.replace(/([^\n])(\s)([IVX]+|[ivx]+)(\.)/g,"$1\n$3$4"),res=res.replace(/\n{3,}/g,"\n\n"),res},processInline=function(text){return text?text.replace(/!\[(.*?)\]\((.*?)\)/g,'<img src="$2" alt="$1" style="max-width:100%;height:auto;">').replace(/\[(.*?)\]\((.*?)\)/g,'<a href="$2" target="_blank" rel="noopener noreferrer">$1</a>').replace(/\*\*\*\*(.*?)\*\*\*\*/g,"<h3>$1</h3>").replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>").replace(/\*(.*?)\*/g,"<em>$1</em>").replace(/`(.*?)`/g,'<code style="background:#eee;padding:2px 4px;border-radius:3px;">$1</code>'):""},closeList=function(html,listType){return listType?html+("ul"===listType?"</ul>":"</ol>"):html},processListItems=function(state,trimmed){let m=trimmed.match(/^([IVX]+)\.\s+(.*)/);return m?(state.inList&&"ol_roman"===state.listType||(state.html=closeList(state.html,state.listType),state.html+='<ol type="I">',state.inList=!0,state.listType="ol_roman"),state.html+="<li>"+processInline(m[2])+"</li>",!0):(m=trimmed.match(/^[*\-+]\s+(.*)/),m?(state.inList&&"ul"===state.listType||(state.html=closeList(state.html,state.listType),state.html+="<ul>",state.inList=!0,state.listType="ul"),state.html+="<li>"+processInline(m[1])+"</li>",!0):(m=trimmed.match(/^\d+\.\s+(.*)/),!!m&&(state.inList&&"ol"===state.listType||(state.html=closeList(state.html,state.listType),state.html+="<ol>",state.inList=!0,state.listType="ol"),state.html+="<li>"+processInline(m[1])+"</li>",!0)))};return{autofixMarkdown:autofixMarkdown,renderMarkdown:function(md){if(!md)return"";const lines=autofixMarkdown(md).replace(/</g,"&lt;").replace(/>/g,"&gt;").split(/\r?\n/),state={html:"",inList:!1,inCodeBlock:!1,listType:null};return lines.forEach((function(line){!function(state,line){if(line.trim().startsWith("```")){if(state.inCodeBlock)state.inCodeBlock=!1,state.html+="</code></pre>";else{state.html=closeList(state.html,state.listType),state.inList=!1,state.listType=null;const style="display:block;background:#f4f4f4;padding:10px;border-radius:5px;overflow-x:auto;font-family:monospace;";state.html+='<pre><code style="'+style+'">',state.inCodeBlock=!0}return}if(state.inCodeBlock)return void(state.html+=line+"\n");const trimmed=line.trim();if(""===trimmed)return state.html=closeList(state.html,state.listType),state.inList=!1,state.listType=null,void(state.html+="<br>");const hdrs=[{prefix:"###### ",tag:"h6"},{prefix:"##### ",tag:"h5"},{prefix:"#### ",tag:"h4"},{prefix:"### ",tag:"h3"},{prefix:"## ",tag:"h2"},{prefix:"# ",tag:"h1"}];for(let i=0;i<hdrs.length;i++)if(trimmed.startsWith(hdrs[i].prefix))return state.html=closeList(state.html,state.listType),state.inList=!1,state.listType=null,void(state.html+="<"+hdrs[i].tag+">"+processInline(trimmed.substring(hdrs[i].prefix.length))+"</"+hdrs[i].tag+">");if(trimmed.match(/^(\*{3,}|-{3,}|_{3,})$/))return state.html=closeList(state.html,state.listType),state.inList=!1,state.listType=null,void(state.html+="<hr>");if(!processListItems(state,trimmed))if(trimmed.startsWith("> ")){state.html=closeList(state.html,state.listType),state.inList=!1,state.listType=null;const bstyle="border-left:4px solid #ccc;padding-left:10px;color:#666;";state.html+='<blockquote style="'+bstyle+'">'+processInline(trimmed.substring(2))+"</blockquote>"}else state.html=closeList(state.html,state.listType),state.inList=!1,state.listType=null,state.html+="<p>"+processInline(trimmed.replace(/^\*(?!\*)\s*/,""))+"</p>"}(state,line)})),state.html=closeList(state.html,state.listType),state.html},renderText:function(md){if(!md)return"";var txt=autofixMarkdown(md);txt=txt.replace(/\*\*\*\*(.*?)\*\*\*\*/g,"$1");for(var prev="";txt!==prev;)prev=txt,txt=txt.replace(/(\*\*|__)(.*?)\1/g,"$2").replace(/(\*|_)(.*?)\1/g,"$2");return(txt=(txt=(txt=(txt=(txt=txt.replace(/^#+\s+(.*)$/gm,"\n$1\n"+"-".repeat(20))).replace(/^[*\-+]\s+/gm,"- ")).replace(/```/g,"")).replace(/^- \s*\*+/gm,"")).replace(/\n{3,}/g,"\n\n")).trim()}}}));

//# sourceMappingURL=markdown.min.js.map