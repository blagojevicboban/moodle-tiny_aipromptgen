define("tiny_aipromptgen/pickers",[],(function(){const $=function(sel,root){return(root=root||document).querySelector(sel)},$$=function(sel,root){return root=root||document,Array.from(root.querySelectorAll(sel))};return{attachPicker:function(config){const openId=config.openId,modalId=config.modalId,closeId=config.closeId,cancelId=config.cancelId,itemSelector=config.itemSelector,targetId=config.targetId,backdropId=config.backdropId||"ai4t-modal-backdrop",openBtn=document.getElementById(openId),modal=document.getElementById(modalId),backdrop=document.getElementById(backdropId),closeBtn=document.getElementById(closeId),cancelBtn=document.getElementById(cancelId),target=document.getElementById(targetId),close=function(){modal&&backdrop&&(modal.style.display="none",backdrop.style.display="none")},pick=function(el){const v=el.getAttribute("data-value");target&&null!==v&&(target.value=v,target.dispatchEvent(new Event("input",{bubbles:!0}))),close()};openBtn&&openBtn.addEventListener("click",(function(e){e.preventDefault(),e.stopPropagation(),modal&&backdrop&&(modal.style.display="block",backdrop.style.display="block",modal.focus())})),closeBtn&&closeBtn.addEventListener("click",close),cancelBtn&&cancelBtn.addEventListener("click",close),backdrop&&backdrop.addEventListener("click",close),document.addEventListener("keydown",(function(ev){"Escape"===ev.key&&close()})),$$(itemSelector).forEach((function(li){li.addEventListener("click",(function(){pick(li)})),li.addEventListener("keydown",(function(ev){"Enter"!==ev.key&&" "!==ev.key||(ev.preventDefault(),pick(li))}))}))},attachOutcomesModal:function(){const openBtn=$("#ai4t-outcomes-browse"),modal=$("#ai4t-outcomes-modal"),backdrop=$("#ai4t-modal-backdrop"),closeBtn=$("#ai4t-outcomes-modal-close"),cancelBtn=$("#ai4t-outcomes-modal-cancel"),insertBtn=$("#ai4t-outcomes-modal-insert"),ta=$("#id_outcomes"),close=function(){modal&&backdrop&&(modal.style.display="none",backdrop.style.display="none")};openBtn&&openBtn.addEventListener("click",(function(e){e.preventDefault(),e.stopPropagation(),modal&&backdrop&&(modal.style.display="block",backdrop.style.display="block",modal.focus())})),closeBtn&&closeBtn.addEventListener("click",close),cancelBtn&&cancelBtn.addEventListener("click",close),insertBtn&&insertBtn.addEventListener("click",(function(){if(!ta)return void close();const vals=$$(".ai4t-outcome-checkbox:checked").map((function(cb){return cb.value})).filter(Boolean);if(!vals.length)return void close();let cur=ta.value||"";cur&&!/\n$/.test(cur)&&(cur+="\n"),ta.value=cur+vals.join("\n"),ta.dispatchEvent(new Event("input",{bubbles:!0})),close()})),backdrop&&backdrop.addEventListener("click",close)},initLanguageModal:function(){const openBtn=$("#ai4t-language-browse"),modal=$("#ai4t-language-modal"),backdrop=$("#ai4t-modal-backdrop"),closeBtn=$("#ai4t-language-modal-close"),cancelBtn=$("#ai4t-language-modal-cancel"),input=$("#id_language"),codeEl=$("#id_languagecode"),close=function(){modal&&backdrop&&(modal.style.display="none",backdrop.style.display="none")},sync=function(){if(!input||!codeEl)return;const t=(input.value||"").trim();if(!t)return;const m=t.match(/\(([a-z]{2,3}(?:[_-][a-z]{2,3})?)\)/i);m?codeEl.value=m[1].replace("-","_").toLowerCase():$$(".ai4t-language-item").some((function(li){return(li.getAttribute("data-name")||"").toLowerCase()===t.toLowerCase()&&(codeEl.value=li.getAttribute("data-code"),!0)}))};openBtn&&openBtn.addEventListener("click",(function(e){e.preventDefault(),e.stopPropagation(),modal&&backdrop&&(modal.style.display="block",backdrop.style.display="block",modal.focus())})),closeBtn&&closeBtn.addEventListener("click",close),cancelBtn&&cancelBtn.addEventListener("click",close),backdrop&&backdrop.addEventListener("click",close),$$(".ai4t-language-item").forEach((function(li){li.addEventListener("click",(function(){input&&(input.value=li.getAttribute("data-name")||"",input.dispatchEvent(new Event("input",{bubbles:!0}))),codeEl&&(codeEl.value=li.getAttribute("data-code")||""),close()}))})),input&&(input.addEventListener("blur",sync),input.addEventListener("change",sync))}}}));

//# sourceMappingURL=pickers.min.js.map